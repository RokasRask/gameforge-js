// NotFoundPage.scss
// Styles for the 404 page

@import '../../styles/variables';
@import '../../styles/mixins';

.not-found-page {
    padding: $spacing-xl 0;
    min-height: 80vh;
    display: flex;
    flex-direction: column;
    justify-content: center;

    &__container {
        @include container;
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }

    // Error display
    &__error {
        margin-bottom: $spacing-xl;
    }

    &__error-code {
        font-family: $font-family-pixel;
        font-size: 8rem;
        line-height: 1;
        color: $color-primary;
        margin-bottom: $spacing-md;
        position: relative;
        text-shadow: 4px 4px 0 $color-black;
        display: inline-block;

        // Glitch effect
        &::before,
        &::after {
            content: "404";
            position: absolute;
            top: 0;
            width: 100%;
            height: 100%;
        }

        &::before {
            left: -2px;
            color: $color-secondary;
            clip-path: inset(0 0 50% 0);
            animation: glitch-1 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite;
        }

        &::after {
            left: 2px;
            color: $color-tertiary;
            clip-path: inset(50% 0 0 0);
            animation: glitch-2 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) reverse both infinite;
        }

        // Pixel border
        &::before,
        &::after {
            text-shadow: 4px 4px 0 $color-black;
        }
    }

    &__error-message {
        font-family: $font-family-pixel;
        font-size: $font-size-xl;
        margin-bottom: $spacing-xl;
        color: $color-dark-gray;

        // Typewriter effect
        overflow: hidden;
        border-right: 0.15em solid $color-primary;
        white-space: nowrap;
        margin: 0 auto $spacing-xl;
        animation:
            typing 3.5s steps(40, end),
            blink-caret 0.75s step-end infinite;

        @include media-breakpoint-down(sm) {
            font-size: $font-size-lg;
            white-space: normal;
            border-right: none;
            animation: none;
        }
    }

    // Mini game area
    &__game {
        margin: $spacing-xl auto;
        max-width: 500px;
    }

    &__game-message {
        font-family: $font-family-pixel;
        font-size: $font-size-md;
        margin-bottom: $spacing-md;
        color: $color-gray;
    }

    &__game-area {
        width: 100%;
        height: 300px;
        background-color: $color-light-gray;
        border: 4px solid $color-black;
        box-shadow: 6px 6px 0 0 rgba($color-black, 0.2);
        position: relative;
        margin-bottom: $spacing-md;
        overflow: hidden;

        // Pixel background
        background-image:
            linear-gradient(to right, rgba($color-black, 0.1) 1px, transparent 1px),
            linear-gradient(to bottom, rgba($color-black, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;

        @include media-breakpoint-down(sm) {
            height: 200px;
        }
    }

    // Game character
    &__game-character {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: $color-primary;
        transition: left 0.2s, top 0.2s;
        transform: translate(-50%, -50%);
        z-index: 2;

        // Pixel character
        clip-path: polygon(0% 0%, 100% 0%, 100% 20%, 80% 20%, 80% 40%, 100% 40%,
                100% 60%, 80% 60%, 80% 80%, 100% 80%, 100% 100%,
                0% 100%, 0% 80%, 20% 80%, 20% 60%, 0% 60%,
                0% 40%, 20% 40%, 20% 20%, 0% 20%);

        // Walking animation
        animation: pixel-walk 0.5s steps(2) infinite;
    }

    // Treasure chests
    &__game-chest {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: $color-tertiary;
        border: 2px solid darken($color-tertiary, 20%);
        z-index: 1;

        &--top-left {
            top: 10px;
            left: 10px;
        }

        &--top-right {
            top: 10px;
            right: 10px;
        }

        &--bottom-left {
            bottom: 10px;
            left: 10px;
        }

        &--bottom-right {
            bottom: 10px;
            right: 10px;
        }
    }

    // Controls display (for mobile)
    &__controls {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        width: 120px;
        margin: 0 auto;

        @include media-breakpoint-up(md) {
            display: none; // Hide on desktop
        }
    }

    &__controls-button {
        width: 40px;
        height: 40px;
        background-color: $color-dark-gray;
        color: $color-white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: $font-family-pixel;
        font-size: $font-size-lg;
        cursor: pointer;
        border: 2px solid $color-black;

        &--up {
            margin: 0 auto;
            border-bottom: none;
        }

        &--left {
            border-right: none;
        }

        &--right {
            border-left: none;
        }

        &:active {
            background-color: $color-primary;
        }
    }

    // Secret message
    &__secret-message {
        background-color: $color-black;
        color: $color-white;
        padding: $spacing-sm;
        margin: $spacing-md auto;
        font-family: $font-family-pixel;
        border: 2px solid $color-tertiary;
        max-width: 300px;
        animation: pixel-fade-in 0.5s forwards;
    }

    // "Go Home" button section
    &__action {
        margin-top: $spacing-xl;
    }

    // Theme variations
    .theme-nes & {
        &__error-code {
            color: var(--primary-color);
        }

        &__game-character {
            background-color: var(--primary-color);
        }

        &__controls-button:active {
            background-color: var(--primary-color);
        }
    }

    .theme-gameboy & {
        &__error-code {
            color: var(--primary-color);
            text-shadow: 2px 2px 0 var(--secondary-color);
        }

        &__error-message {
            color: var(--text-color);
        }

        &__game-area {
            background-color: var(--background-color);
            border-color: var(--secondary-color);
        }

        &__game-chest {
            background-color: var(--primary-color);
            border-color: var(--secondary-color);
        }

        &__game-character {
            background-color: var(--secondary-color);
        }

        &__controls-button {
            background-color: var(--secondary-color);
            color: var(--background-color);
            border-color: var(--secondary-color);

            &:active {
                background-color: var(--primary-color);
            }
        }
    }

    .theme-arcade & {
        &__error-code {
            color: #ff00ff;
            text-shadow: 4px 4px 0 #0000ff;
        }

        &__error-code::before {
            color: #00ffff;
        }

        &__error-code::after {
            color: #ffff00;
        }

        &__game-area {
            background-color: #000033;
            border-color: #ff00ff;
            box-shadow: 6px 6px 0 0 #0000ff;
        }

        &__game-chest {
            background-color: #ffff00;
            border-color: #ff00ff;
        }

        &__game-character {
            background-color: #ff00ff;
            box-shadow: 2px 2px 0 #00ffff;
        }

        &__secret-message {
            border-color: #ff00ff;
            background-color: #000033;
            color: #00ffff;
        }
    }
}

// Typing animation
@keyframes typing {
    from {
        width: 0
    }

    to {
        width: 100%
    }
}

// Blinking cursor animation
@keyframes blink-caret {

    from,
    to {
        border-color: transparent
    }

    50% {
        border-color: $color-primary
    }
}

// Glitch animations
@keyframes glitch-1 {
    0% {
        clip-path: inset(20% 0 80% 0);
    }

    20% {
        clip-path: inset(60% 0 40% 0);
    }

    40% {
        clip-path: inset(40% 0 60% 0);
    }

    60% {
        clip-path: inset(80% 0 20% 0);
    }

    80% {
        clip-path: inset(10% 0 90% 0);
    }

    100% {
        clip-path: inset(30% 0 70% 0);
    }
}

@keyframes glitch-2 {
    0% {
        clip-path: inset(80% 0 20% 0);
    }

    20% {
        clip-path: inset(20% 0 80% 0);
    }

    40% {
        clip-path: inset(60% 0 40% 0);
    }

    60% {
        clip-path: inset(10% 0 90% 0);
    }

    80% {
        clip-path: inset(70% 0 30% 0);
    }

    100% {
        clip-path: inset(40% 0 60% 0);
    }
}