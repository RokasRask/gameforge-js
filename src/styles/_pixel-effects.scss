// _pixel-effects.scss
// Special pixel/8-bit style effects

@import 'variables';
@import 'mixins';

// Pixel corner effect (for decorative elements)
.pixel-corner {
    position: relative;

    &::before,
    &::after {
        content: "";
        position: absolute;
        width: 8px;
        height: 8px;
        background-color: $color-black;
    }

    &::before {
        top: -4px;
        left: -4px;
    }

    &::after {
        top: -4px;
        right: -4px;
    }

    &::before {
        clip-path: polygon(0 0, 100% 0, 0 100%);
    }

    &::after {
        clip-path: polygon(0 0, 100% 0, 100% 100%);
    }
}

// Pixel notch (for tabs, buttons, etc.)
.pixel-notch {
    position: relative;

    &::before {
        content: "";
        position: absolute;
        top: -8px;
        left: 16px;
        width: 16px;
        height: 8px;
        background-color: inherit;
        clip-path: polygon(0 100%, 50% 0, 100% 100%);
    }
}

// Pixelated gradient
.pixel-gradient {
    background-image: linear-gradient(to bottom,
            $color-white 0%,
            $color-white 25%,
            $color-light-gray 25%,
            $color-light-gray 50%,
            $color-gray 50%,
            $color-gray 75%,
            $color-dark-gray 75%,
            $color-dark-gray 100%);
    background-size: 100% 16px;
    background-repeat: repeat-y;

    &--horizontal {
        background-image: linear-gradient(to right,
                $color-white 0%,
                $color-white 25%,
                $color-light-gray 25%,
                $color-light-gray 50%,
                $color-gray 50%,
                $color-gray 75%,
                $color-dark-gray 75%,
                $color-dark-gray 100%);
        background-size: 16px 100%;
        background-repeat: repeat-x;
    }

    &--color {
        background-image: linear-gradient(to bottom,
                $color-primary 0%,
                $color-primary 25%,
                $color-secondary 25%,
                $color-secondary 50%,
                $color-tertiary 50%,
                $color-tertiary 75%,
                $color-accent 75%,
                $color-accent 100%);
    }
}

// Pixel noise texture
.pixel-noise {
    position: relative;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAABBJJREFUaEPtmttx2zAQRQ+UQDtQB04qiBRBXIFjVWCngrCCSBVEqSB0BaYriPJbPkQZxKnAKoF+IBOE8REgXpQdj/0Jj7h77t7lLgAK/5CNj0Y//f3VQrsPEPKFXFQCwDuA9YGi9kJcfpNGEz05eUq2gwRA/iVKcuaMlSQi0UjpSbKRJDwDODa0uyEg1xK2Ip3Oh3x+flDHxwPT69X4VCpV0e121WAwkN1ut/L09GTKnp+fK9K0Uv10nU6nslqtKqPRyNj65dLtxwIRCZ7f3NzcyvF4bI6VEipUQgFDH5qSnWcNAXl+LjGU58H3b5X9i9M5x0CSp4a4uLiQs9ksG0CsUC6QEIi7u0s5nU6z2WQDWSwWcjQaZbNHnWwgPohcELGwZYEIgchpLruKgZwcKzGQXOdaLGSvPTGQ5QI5O7uUt7e3WUKWnmQDCYFIm1KLBE6S8R3ZGkhOoYkFwgcyMxD/YPzBFKfWlwY4vhfSYtXiIj5XrtW0wmbqUFpM/YrKHI66vFAhsVutuiCKjZ0sIOvHR1kul73lcqmKCdXrQa/bjf9Cqq1KodMp6rPZeO2ORvX3Qgh6t8Mw5+7uVqqFh+oPwK9Kt1ur17tUuVVTiN7eXsvl8qYHEF+g/ZjqIqnVFHMMKtBIzrRV1yCcwF5hWfHJb0HlAtX+GRJBnx2+GvSsj34aI1VQYjuXzGNbKrOWMWpbdYNjc4sXC4YLRETMnA0r1ELCJ8dw0Km9bTMRWfC2QCEgtVqKq9iYnIp5V/2xIkJFc4BgGgPR61cZKuQH0HJVfTYBK5iqnQtEvRPRWu/tACHxdCsahdhAdJUoDKzbHVyp9y7lDgmgvw1VjYGcnp6WDw8Pvdls5q09QvcRqDyg/gDRVlUkVHnWoYPBQOYUkBgIJ6VtCFa5h4FDrQTaxQaigKwWC1mUJT1nUXdL+4FUAbpO9cbbhA5LJzAQjuNQHFWDJyVYdNa1ZQdVRCDamm2CGS0NDLQSAqKcxERN56KA+CEYRFCN1FDYaSDc0NKD2LJmqK3QeR8IhcaLHYiZiqpCCIT2fNcxm1YC94XWzPWEDlWl0O6+C27c0aqNJRNaDT9Sxl0hvU/lVe9qJalv/Gxw0FTy+2wNxDpJHdGq6tB9Vbfs6pv3EdUnjUl+KA8KpA6yUH/HBlEbK3X7+wLCiQwu/9pzNDaUC4ZlpVuNlZQ9VpdwG8cQIadUY7wnf/+RW6khuBKI86FAUoJe7/PxDQJRQzIqtDbGvhUQauyvCGQfEG8FxB889b9IPg9IBSXHr1RqQXnvIJyOv96eSGz/AKSkc5ySG+qSAAAAAElFTkSuQmCC");
        background-size: 10px 10px;
        opacity: 0.1;
        z-index: 0;
        pointer-events: none;
    }
}

// Pixel glitch effect
.pixel-glitch {
    position: relative;
    overflow: hidden;

    &::before,
    &::after {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: inherit;
    }

    &::before {
        left: 2px;
        text-shadow: -2px 0 $color-primary;
        animation: glitch-1 2s infinite linear alternate-reverse;
        clip-path: inset(0 0 50% 0);
    }

    &::after {
        left: -2px;
        text-shadow: 2px 0 $color-secondary;
        animation: glitch-2 3s infinite linear alternate-reverse;
        clip-path: inset(50% 0 0 0);
    }
}

// Digital screen (for game screens, monitors, etc.)
.digital-screen {
    position: relative;
    overflow: hidden;

    // Scanlines
    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(to bottom,
                transparent,
                transparent 1px,
                rgba($color-black, 0.05) 1px,
                rgba($color-black, 0.05) 2px);
        pointer-events: none;
        z-index: 1;
    }

    // Screen glare
    &::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 300%;
        height: 100%;
        background: linear-gradient(to right,
                rgba($color-white, 0) 0%,
                rgba($color-white, 0.2) 50%,
                rgba($color-white, 0) 100%);
        transform: rotate(15deg);
        animation: screen-glare 8s infinite linear;
        pointer-events: none;
        z-index: 2;
    }
}

// Pixel borders
.border-pixel {
    border-style: solid;
    border-width: 4px;
    border-color: $color-black;
    box-shadow: 4px 4px 0 0 rgba($color-black, 0.2);
}

.border-pixel-inset {
    border-style: solid;
    border-width: 4px;
    border-color: $color-light-gray $color-dark-gray $color-dark-gray $color-light-gray;
}

.border-pixel-outset {
    border-style: solid;
    border-width: 4px;
    border-color: $color-dark-gray $color-light-gray $color-light-gray $color-dark-gray;
}

.border-pixel-dashed {
    border-style: dashed;
    border-width: 4px;
    border-color: $color-black;
    background-clip: padding-box;
}

// Pixel shadow variations
.shadow-pixel {
    box-shadow: 4px 4px 0 0 rgba($color-black, 0.2);
}

.shadow-pixel-large {
    box-shadow: 8px 8px 0 0 rgba($color-black, 0.2);
}

.shadow-pixel-inset {
    box-shadow: inset 4px 4px 0 0 rgba($color-black, 0.2);
}

.shadow-pixel-colored {
    box-shadow:
        4px 0 0 0 $color-primary,
        0 4px 0 0 $color-secondary,
        4px 4px 0 0 $color-tertiary;
}

// Pixel icons
.pixel-icon {
    display: inline-block;
    width: 24px;
    height: 24px;
    background-color: currentColor;
    mask-position: center;
    mask-repeat: no-repeat;
    mask-size: contain;
    -webkit-mask-position: center;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: contain;

    &--heart {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/%3E%3C/svg%3E");
    }

    &--star {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/%3E%3C/svg%3E");
    }

    &--play {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M8 5v14l11-7z'/%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M8 5v14l11-7z'/%3E%3C/svg%3E");
    }

    &--controller {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M21,6H3C1.9,6,1,6.9,1,8v8c0,1.1,0.9,2,2,2h18c1.1,0,2-0.9,2-2V8C23,6.9,22.1,6,21,6z M11,13H8v3H6v-3H3v-2h3V8h2v3h3V13z M15.5,15 c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S16.33,15,15.5,15z M19.5,12c-0.83,0-1.5-0.67-1.5-1.5S18.67,9,19.5,9 s1.5,0.67,1.5,1.5S20.33,12,19.5,12z'/%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M21,6H3C1.9,6,1,6.9,1,8v8c0,1.1,0.9,2,2,2h18c1.1,0,2-0.9,2-2V8C23,6.9,22.1,6,21,6z M11,13H8v3H6v-3H3v-2h3V8h2v3h3V13z M15.5,15 c-0.83,0-1.5-0.67-1.5-1.5s0.67-1.5,1.5-1.5s1.5,0.67,1.5,1.5S16.33,15,15.5,15z M19.5,12c-0.83,0-1.5-0.67-1.5-1.5S18.67,9,19.5,9 s1.5,0.67,1.5,1.5S20.33,12,19.5,12z'/%3E%3C/svg%3E");
    }
}

// Animation for screen glare effect
@keyframes screen-glare {
    0% {
        transform: translateX(-100%) rotate(15deg);
    }

    100% {
        transform: translateX(100%) rotate(15deg);
    }
}

// Glitch animations
@keyframes glitch-1 {
    0% {
        clip-path: inset(20% 0 80% 0);
    }

    20% {
        clip-path: inset(60% 0 40% 0);
    }

    40% {
        clip-path: inset(40% 0 60% 0);
    }

    60% {
        clip-path: inset(80% 0 20% 0);
    }

    80% {
        clip-path: inset(10% 0 90% 0);
    }

    100% {
        clip-path: inset(30% 0 70% 0);
    }
}

@keyframes glitch-2 {
    0% {
        clip-path: inset(80% 0 20% 0);
    }

    20% {
        clip-path: inset(20% 0 80% 0);
    }

    40% {
        clip-path: inset(60% 0 40% 0);
    }

    60% {
        clip-path: inset(10% 0 90% 0);
    }

    80% {
        clip-path: inset(70% 0 30% 0);
    }

    100% {
        clip-path: inset(40% 0 60% 0);
    }
}