// main.scss
// Main stylesheet for GameForge.js

// Import base styles
@import 'reset';
@import 'variables';
@import 'mixins';
@import 'animations';
@import 'typography';
@import 'responsive';
@import 'pixel-effects';

// Import component styles
@import '../components/common/Button/Button';
@import '../components/common/Navbar/Navbar';
@import '../components/common/Footer/Footer';
@import '../components/common/GameCard/GameCard';
@import '../components/common/PixelTransition/PixelTransition';
@import '../components/common/SearchBar/SearchBar';
@import '../components/common/ThemeSwitcher/ThemeSwitcher';
@import '../components/common/SoundToggle/SoundToggle';
@import '../components/common/FeaturedCarousel/FeaturedCarousel';
@import '../components/common/Leaderboard/Leaderboard';
@import '../components/common/Rating/Rating';
@import '../components/common/FilterMenu/FilterMenu';

// Import auth component styles
@import '../components/auth/LoginForm/LoginForm';
@import '../components/auth/RegisterForm/RegisterForm';

// Import game component styles
@import '../components/games/GamesList/GamesList';
@import '../components/games/GameFrame/GameFrame';
@import '../components/games/GameCategories/GameCategories';
@import '../components/games/ReviewSection/ReviewSection';

// Import layout styles
@import '../layouts/MainLayout/MainLayout';

// Import page styles
@import '../pages/LandingPage/LandingPage';
@import '../pages/GamesPage/GamesPage';
@import '../pages/GameCategoryPage/GameCategoryPage';
@import '../pages/ContactPage/ContactPage';
@import '../pages/LoginPage/LoginPage';
@import '../pages/RegisterPage/RegisterPage';
@import '../pages/GameDetailPage/GameDetailPage';
@import '../pages/ProfilePage/ProfilePage';
@import '../pages/LeaderboardPage/LeaderboardPage';
@import '../pages/DeveloperPortalPage/DeveloperPortalPage';
@import '../pages/NotFoundPage/NotFoundPage';

// Global styles
body {
    background-color: $color-background;
    min-height: 100vh;
    overflow-x: hidden;

    &.pixel-theme {
        @include pixel-text;
        image-rendering: pixelated;

        * {
            image-rendering: pixelated;
        }
    }

    // Theme classes
    &.theme-nes {
        --primary-color: map-get(map-get($themes, 'nes'), 'primary');
        --secondary-color: map-get(map-get($themes, 'nes'), 'secondary');
        --background-color: map-get(map-get($themes, 'nes'), 'background');
        --text-color: map-get(map-get($themes, 'nes'), 'text');
    }

    &.theme-gameboy {
        --primary-color: map-get(map-get($themes, 'gameboy'), 'primary');
        --secondary-color: map-get(map-get($themes, 'gameboy'), 'secondary');
        --background-color: map-get(map-get($themes, 'gameboy'), 'background');
        --text-color: map-get(map-get($themes, 'gameboy'), 'text');
    }

    &.theme-arcade {
        --primary-color: map-get(map-get($themes, 'arcade'), 'primary');
        --secondary-color: map-get(map-get($themes, 'arcade'), 'secondary');
        --background-color: map-get(map-get($themes, 'arcade'), 'background');
        --text-color: map-get(map-get($themes, 'arcade'), 'text');
    }
}

// App wrapper
.app {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

// Utility classes for pixel art styles
.pixel-border {
    @include pixel-border;
}

.pixel-shadow {
    @include pixel-shadow;
}

.pixel-bg {
    @include pixel-background;
}

.pixelated {
    @include pixelated-image;
}

.pixel-button {
    @include pixel-button;
}

.pixel-card {
    @include pixel-card;
}

// 8-bit Grid Background
.grid-bg {
    position: relative;

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image:
            linear-gradient($color-light-gray 1px, transparent 1px),
            linear-gradient(90deg, $color-light-gray 1px, transparent 1px);
        background-size: 16px 16px;
        background-position: -1px -1px;
        z-index: -1;
        opacity: 0.5;
    }
}

// App loader
.app-loader {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: $color-background;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;

    &__content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    &__logo {
        @include pixel-text;
        font-size: 2rem;
        margin-bottom: $spacing-md;
        color: $color-primary;
    }

    &__spinner {
        @extend .pixel-loader;
        margin-bottom: $spacing-md;
    }

    &__text {
        @include pixel-text;
        font-size: $font-size-sm;
        color: $color-gray;
    }
}

// 404 page
.not-found-page {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
    text-align: center;
    padding: $spacing-xl;

    h1 {
        @include pixel-text;
        font-size: 6rem;
        color: $color-primary;
        margin-bottom: $spacing-md;

        // Pixel glitch effect
        position: relative;

        &::before,
        &::after {
            content: "404";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        &::before {
            color: $color-accent;
            animation: glitch 0.3s infinite;
            clip-path: inset(0 0 50% 0);
        }

        &::after {
            color: $color-secondary;
            animation: glitch 0.5s infinite;
            clip-path: inset(50% 0 0 0);
        }
    }

    p {
        @include pixel-text;
        font-size: $font-size-lg;
        margin-bottom: $spacing-lg;
    }
}

// Screen and keyboard focus styles
.screen-reader-only {
    @include visually-hidden;
}

:focus {
    outline: 2px solid $color-secondary;
    outline-offset: 2px;
}

// Easter egg animation trigger class
.easter-egg-activated {
    animation: pixel-explosion 0.5s ease-out forwards;
}